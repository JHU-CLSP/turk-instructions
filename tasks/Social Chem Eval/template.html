<!--
Pilot 3: Rule-of-Thumb (rot)

This HIT: Each worker writes a rule-of-thumb for why a situation may be bad or good. The
context could be an original title, an edit, or a title+edit combination (with a tag
assigned to one or the delta between them). Content TBD. But what they'll do:
    - read context
    - judge whether behavior is good or bad
    - write up a rule-of-thumb to explain what's going on
 -->

<!-- Enable responsive behavior on smaller screens -->
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1" name="viewport" />
<!-- <script type="text/javascript" src="http://livejs.com/live.js"></script> -->

<!--CSS Frameworks-->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css" />


<!-- Visual Content -->
<section class="container" id="TaggingOfAnImage">

    <!--Instructions panel-->
    <div class="row">
        <div class="col">
            <div class="card bg-light mb-3">

                <!--Heading -->
                <a class="card-header" href="javascript:void(0);" id="collapseTrigger">
                    <strong>Instructions</strong>
                    <span class="collapse-text">(Click to collapse)</span>
                </a>

                <!-- Content -->
                <div class="card-body" id="instructionBody">

                    <!--Instruction text -->
                    <h3 class="card-title">Instructions</h3>
                    <p class="measure-wide lh-copy f5">
                        Write rules-of-thumb to <span class="b">explain social norms to a computer!</span>
                    </p>

                    <!-- <p class="measure-wide lh-copy f5">
                        We provide you with situations that have been written to demonstrate
                        <span class="b bg-dark-green white pa1 br-pill">
                            good beahvior and intentions
                        </span>, or
                        <span class="b bg-dark-red white pa1 br-pill">bad behavior and intentions.</span>
                    </p> -->

                    <p class="measure-wide lh-copy f5">
                        Please help the computer understand why the behavior is good or
                        bad by writing rules-of-thumb. Each rule-of-thumb should explain
                        a social norm that people usually expect.
                    </p>
                    <p class="measure-wide lh-copy f5">
                        Important: Please use complete sentences and good grammar in your explanations.
                    </p>

                    <h3 class="card-title mt4">Examples</h3>

                    <p class="measure-wide lh-copy f5 i mb1">
                        Running a blender early in the morning.
                    </p>

                    <ul>
                        <li><b>Judgment:</b> <span class="b bg-dark-red white pa1 br-pill">bad behavior</span></li>
                        <li class="measure-wide">
                            <b>Rule-of-thumb:</b> Running a blender early will probably wake up
                            people around you.
                        </li>

                        <li class="measure-wide">
                            <b>Rule-of-thumb:</b> It's rude to wake up people when they're sleeping.
                        </li>

                    </ul>

                    <p class="measure-wide lh-copy f5 i mb1">
                        Helping my girlfriend clean the house.
                    </p>

                    <ul>
                        <li>
                            <b>Judgment:</b> <span class="b bg-dark-green white pa1 br-pill mt3">good behavior</span>
                        </li>

                        <li class="measure-wide">
                            <b>Rule-of-thumb:</b> It's thoughtful to help someone else
                            clean.
                        </li>
                    </ul>

                    <p class="measure-wide lh-copy f6 i mt4">
                        Please note: Current employees or students of the University
                        of Washington are not eligible to complete this HIT.
                    </p>

                </div>
            </div>
        </div>
    </div>

    <!--Motivation -->
    <div class="row">
        <div class="col">
            <div class="card bg-light mb-3">

                <!--Heading -->
                <a class="card-header" href="javascript:void(0);" id="collapseTrigger3">
                    <strong>Motivation</strong>
                    <span class="collapse-text3">(Click to collapse)</span>
                </a>

                <!-- Content -->
                <div class="card-body" id="instructionBody3">

                    <!--Motivation text -->
                    <h3 class="card-title">Motivation</h3>
                    <p class="measure-wide lh-copy f5">
                        We are collecting data to help computers understand which
                        actions are good or bad according to <span class="i b">social norms</span> or <span
                            class="i b">morality</span>.
                    </p>
                    <p class="measure-wide lh-copy f5">
                        Computers are pretty dumb right now, and we want to help them
                        understand social norms a bit better. This is where you come in!
                        We have provided you with potentially morally-charged
                        situations, and we're asking you to help write rules of thumb so
                        computers can understand <span class="b">why</span> they're good
                        or bad!
                    </p>
                    <p class="measure-wide lh-copy f5">
                        Everyone's judgments of morality and social norms might be
                        slightly different, but that's OK. Please use what feels right
                        to you.
                    </p>
                    <p class="measure-wide lh-copy f5">
                        Thank you for your help! We welcome any feedback, and are
                        grateful for your work.
                    </p>
                </div>
            </div>
        </div>
    </div>


    <!-- Question -->
    <div class="row">
        <div class="col">
            <div class="card bg-light mb-3">

                <!--Heading -->
                <a class="card-header">
                    <strong>Task</strong>
                </a>

                <!-- Content -->
                <div class="card-body">

                    <p class="ttu tracked fw3 f5 mb0">Situation</p>
                    <p class="f3 i mt0">${situation}</p>

                    <p class="ttu tracked fw3 f5 mb0">Does the situation demonstrate good or bad behavior?</p>
                    <div class="cf mw6">
                        <div class="fl w-20">
                            <div class="tc">
                                <input type="radio" name="{{ tag_id }}-tag-fit" value="1" required />
                                <p class="f7 mt2">
                                    <span class="b bg-dark-red white pa1 br-pill">Very bad</span>
                                    <br />
                                    <span class="b bg-dark-red white pa1 br-pill">behavior</span>
                                </p>
                            </div>
                        </div>

                        <div class="fl w-20">
                            <div class="tc">
                                <input type="radio" name="{{ tag_id }}-tag-fit" value="2" required />
                                <p class="f7 mt2">
                                    <span class="b bg-dark-red white pa1 br-pill">Bad</span>
                                    <br />
                                    <span class="b bg-dark-red white pa1 br-pill">behavior</span>
                                </p>
                            </div>
                        </div>

                        <div class="fl w-20">
                            <div class="tc">
                                <input type="radio" name="{{ tag_id }}-tag-fit" value="3" required />
                                <p class="f7 mt2">
                                    <span class="b bg-black-50 white pa1 br-pill">Neutral /</span>
                                    <br />
                                    <span class="b bg-black-50 white pa1 br-pill">good and bad</span>
                                </p>
                            </div>
                        </div>

                        <div class="fl w-20">
                            <div class="tc">
                                <input type="radio" name="{{ tag_id }}-tag-fit" value="4" required />
                                <p class="f7 mt2">
                                    <span class="b bg-dark-green white pa1 br-pill">Good</span>
                                    <br />
                                    <span class="b bg-dark-green white pa1 br-pill">behavior</span>
                                </p>
                            </div>
                        </div>

                        <div class="fl w-20">
                            <div class="tc">
                                <input type="radio" name="{{ tag_id }}-tag-fit" value="5" required />
                                <p class="f7 mt2">
                                    <span class="b bg-dark-green white pa1 br-pill">Excellent</span>
                                    <br />
                                    <span class="b bg-dark-green white pa1 br-pill">behavior</span>
                                </p>
                            </div>
                        </div>

                    </div>

                    <p class="ttu tracked fw3 f5 mb1 mt4">
                        write rules-of-thumb
                    </p>
                    <p class="lh-copy measure-wide f5">
                        Each rule-of-thumb should explain a social norm that people usually expect.
                    </p>
                    <p class="lh-copy measure-wide f6">
                        Please write <span class="b">one to three</span> rules-of-thumb. If the situation is
                        too simple or bizarre to think of any, please tell us in the
                        feedback box (bottom of HIT).</p>

                    <p class="b mb0">Rule of thumb</p>
                    <textarea id="rot-1" name="rot-1" class="mf-textarea"></textarea>
                    <div class="mb3"></div>

                    <p class="b mb0">Rule of thumb</p>
                    <textarea id="rot-1" name="rot-1" class="mf-textarea"></textarea>
                    <div class="mb3"></div>

                    <p class="b mb0">Rule of thumb</p>
                    <textarea id="rot-1" name="rot-1" class="mf-textarea"></textarea>
                    <div class="mb3"></div>

                    <hr />
                    Additional info. Please check any that apply.

                    <ul class="inputs">
                        <li><input type="checkbox" name="nsfw" class="addl" /> <span class="b">NSFW</span> — The
                            situation
                            contains suggestive or adult content.</li>
                        <li><input type="checkbox" name="simple" class="addl" /> <span class="b">Too simple</span> — The
                            situation was very simple or vague (e.g., "in court").</li>
                        <li><input type="checkbox" name="bizarre" class="addl" /> <span class="b">Bizarre</span> — The
                            situation
                            was very bizarre or random. It's not clear what happened.</li>
                    </ul>

                    <hr />

                    <p class="f6 mb1 mt4 measure lh-copy i">
                        Completely optional: we apprecaite any feedback about this
                        paricular instance or for improving this task.
                    </p>
                    <textarea id="feedback" name="feedback" class="mf-textarea"></textarea>

                    <!-- Metadata -->
                    <!-- source-id is a SC unique ID that allows us to trace the situation to its source (scraping, edit, etc) -->
                    <input name="source-id" type="hidden" value="${source-id}" />
                </div>
            </div>
        </div>
    </div>

</section>

<!-- Open internal style sheet -->
<style type="text/css">
    .mf-feedback-prompt {
        margin-top: 100px;
        margin-bottom: 0px;
        font-style: italic;
    }

    .mf-edit {
        width: 100%;
        max-width: 500px;
        height: 80px;
        margin-top: 0px;
    }

    .mf-textarea {
        width: 100%;
        max-width: 500px;
        height: 80px;
        margin-top: 0px;
    }

    .mf-clarification {
        margin-top: -15px;
        color: #666;
        font-size: 10pt;
        font-weight: bold;
        font-style: italic;
    }

    .mf-clarification-2 {
        color: #666;
        font-size: 10pt;
        font-weight: bold;
        font-style: italic;
    }

    .mf-diff-q {
        margin-top: 50px;
    }

    .mf-good {
        /* color: green; */
        font-weight: bold;
    }

    .mf-bad {
        /* color: red; */
        font-weight: bold;
    }

    .mf-prompt {
        font-weight: bold;
        margin-bottom: 0px;
        margin-top: 1rem;
    }

    .mf-input {
        width: 100%;
        max-width: 800px;
    }

    .mf-p-header {
        font-size: 14px;
    }

    ul.inputs {
        padding-left: 10px;
    }

    .inputs li {
        /* float: left; */
        list-style-type: none;
        padding: 5px;
        margin-right: 10px;
    }

    input.addl {
        margin-right: 5px;
    }

    .f7 {
        font-size: 0.5 rem;
    }
</style>


<!-- Bootstrap JS libs-->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

<script>
    $(document).ready(function () {
        // Instructions expand/collapse
        var content = $('#instructionBody');
        var trigger = $('#collapseTrigger');

        // Uncomment to have instructions collapsed by default
        // content.hide();
        // $('.collapse-text').text('(Click to expand)');

        trigger.click(function () {
            content.toggle();
            var isVisible = content.is(':visible');
            if (isVisible) {
                $('.collapse-text').text('(Click to collapse)');
            } else {
                $('.collapse-text').text('(Click to expand)');
            }
        });

        // Example expand/collapse
        var content2 = $('#instructionBody2');
        var trigger2 = $('#collapseTrigger2');

        // Collapse example by default
        content2.hide();
        $('.collapse-text2').text('(Click to expand)');

        trigger2.click(function () {
            content2.toggle();
            var isVisible2 = content2.is(':visible');
            if (isVisible2) {
                $('.collapse-text2').text('(Click to collapse)');
            } else {
                $('.collapse-text2').text('(Click to expand)');
            }
        });

        // Example expand/collapse
        var content3 = $('#instructionBody3');
        var trigger3 = $('#collapseTrigger3');

        // Collapse example by default
        content3.hide();
        $('.collapse-text3').text('(Click to expand)');

        trigger3.click(function () {
            content3.toggle();
            var isVisible3 = content3.is(':visible');
            if (isVisible3) {
                $('.collapse-text3').text('(Click to collapse)');
            } else {
                $('.collapse-text3').text('(Click to expand)');
            }
        });

        $('#submitButton').click(function () {
            // TODO: fixup validation below if required.
            return true;

            // NOTE: could add validation here if needed. alert() and return false.
            if ($("textarea[name=edit-better]").val().trim() == $("input[name=original]").val().trim()) {
                alert('Please provide a "better" edit that is different from the original.');
                return false;
            }
            if ($("textarea[name=edit-worse]").val().trim() == $("input[name=original]").val().trim()) {
                alert('Please provide a "worse" edit that is different from the original.');
                return false;
            }
            if ($('select[name=better-tag]').val() == 'none') {
                alert('Please provide a moral category selection for the "better" edit.');
                return false;
            }
            if ($('select[name=worse-tag]').val() == 'none') {
                alert('Please provide a moral category selection for the "worse" edit.');
                return false;
            }
            return true;
        });

    });
</script>
